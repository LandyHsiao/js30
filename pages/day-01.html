<!DOCTYPE html>
<html lang="ZH-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day 01 - Drum Kit</title>
</head>
<body class="day-01 bg-size-cover bg-position-center bg-norepeat vh-100 position-relative">
  <div class="container-md h-100 d-flex align-items-md-center justify-content-center py-4 py-md-0">
    <ul class="mb-0 list-unstyled d-flex flex-column flex-md-row flex-wrap align-items-center justify-content-md-center keys">
      <li class="key" data-key="65">
        <kbd class="">A</kbd>
        <span class="sound d-none d-md-block">clap</span>
      </li>
      <li class="key" data-key="83">
        <kbd class="">S</kbd>
        <span class="sound d-none d-md-block">hihat</span>
      </li>
      <li class="key" data-key="68">
        <kbd class="">D</kbd>
        <span class="sound d-none d-md-block">kick</span>
      </li>
      <li class="key" data-key="70">
        <kbd class="">F</kbd>
        <span class="sound d-none d-md-block">openhat</span>
      </li>
      <li class="key" data-key="71">
        <kbd class="">G</kbd>
        <span class="sound d-none d-md-block">boom</span>
      </li>
      <li class="key" data-key="72">
        <kbd class="">H</kbd>
        <span class="sound d-none d-md-block">ride</span>
      </li>
      <li class="key" data-key="74">
        <kbd class="">J</kbd>
        <span class="sound d-none d-md-block">snare</span>
      </li>
      <li class="key" data-key="75">
        <kbd class="">K</kbd>
        <span class="sound d-none d-md-block">tom</span>
      </li>
      <li class="key" data-key="76">
        <kbd class="">L</kbd>
        <span class="sound d-none d-md-block">tink</span>
      </li>
    </ul>
  </div>
  <footer class="d-none d-md-block position-absolute fixed-bottom py-4 text-center">
    Photo by <a href="https://unsplash.com/@marcelalaskoski?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Marcela Laskoski</a> on <a href="https://unsplash.com/photos/YrtFlrLo2DQ?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>
  </footer>
  <audio data-key="65" src="../assets/sounds/clap.wav"></audio>
  <audio data-key="83" src="../assets/sounds/hihat.wav"></audio>
  <audio data-key="68" src="../assets/sounds/kick.wav"></audio>
  <audio data-key="70" src="../assets/sounds/openhat.wav"></audio>
  <audio data-key="71" src="../assets/sounds/boom.wav"></audio>
  <audio data-key="72" src="../assets/sounds/ride.wav"></audio>
  <audio data-key="74" src="../assets/sounds/snare.wav"></audio>
  <audio data-key="75" src="../assets/sounds/tom.wav"></audio>
  <audio data-key="76" src="../assets/sounds/tink.wav"></audio>

</body>
<script type="module" src="../main.js"></script>
<script>
  const keyList = [];
  const audioList = [];
  const charcodes = [65, 83, 68, 70, 71, 72, 74, 75, 76];

  function sleep(sec=300) {
    return new Promise((resolve, reject) => {
      setTimeout(() => resolve(), sec);
    });
  }

  document.querySelectorAll(".key").forEach( (e) => {
    keyList.push(e);
  });

  document.querySelectorAll("audio").forEach( (e) => {
    audioList.push(e);
  });

  let playingElement;
  let playingAudio;

  document.addEventListener("keypress", (e) => {
    if (charcodes.includes(e.charCode)) {
      document.querySelector("audio[data-key='" + e.charCode + "']").play();
      document.querySelector(".key[data-key='" + e.charCode + "']").classList.add("playing");
      sleep()
        .then(function() {
          document.querySelector("audio[data-key='" + e.charCode + "']").pause();
          document.querySelector("audio[data-key='" + e.charCode + "']").currentTime = 0;
          document.querySelector(".key[data-key='" + e.charCode + "']").classList.remove("playing");
        });
    }
  });

  document.addEventListener("keyup", (e) => {
  });
</script>
</html>